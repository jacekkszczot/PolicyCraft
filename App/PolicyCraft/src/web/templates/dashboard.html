{% extends "base.html" %}

{% block title %}Dashboard - PolicyCraft{% endblock %}

{% block content %}
<!-- Dashboard heading -->
<h1>Policy Analysis Dashboard</h1>
<p>Comparative insights across university AI policies</p>

{% if data %}
    <!-- Summary statistics -->
    <div class="dashboard-stats">
        <div class="stat-card">
            <h3>{{ data.total_policies }}</h3>
            <p>Total Policies Analysed</p>
        </div>
    </div>
    
    <!-- Classification breakdown -->
    <div class="classification-chart">
        <h3>Policy Approach Distribution</h3>
        <div class="chart-container">
            {% for classification, count in data.classification_counts.items() %}
                <div class="chart-bar">
                    <span class="bar-label">{{ classification }}</span>
                    <div class="bar" style="width: {{ (count / data.total_policies * 100) }}%">
                        <span class="bar-value">{{ count }}</span>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
    
    <!-- Recent analyses -->
    {% if data.recent_analyses %}
    <div class="recent-analyses">
        <h3>Recent Analyses</h3>
        <ul>
            {% for analysis in data.recent_analyses %}
                <li>{{ analysis.get('filename', 'Unknown') }} - {{ analysis.get('classification', 'Unknown') }}</li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}
    
{% else %}
    <!-- Empty state -->
    <div class="empty-state">
        <h2>No Data Available</h2>
        <p>No policy analyses have been completed yet.</p>
        <a href="{{ url_for('upload_file') }}" class="btn">Upload Your First Document</a>
    </div>
{% endif %}
{% endblock %}