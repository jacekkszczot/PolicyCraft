{% extends "base.html" %}

{% block title %}Login - PolicyCraft{% endblock %}

{% block content %}
<!-- 
    ===========================================================================
    PolicyCraft - Login Template
    ===========================================================================
    
    This page handles user authentication for the PolicyCraft platform.
    It provides a secure login form with email/username and password fields.
    
    Table of Contents:
    1. Login Form - Secure authentication form
    2. Password Reset - Link to reset forgotten passwords
    3. Registration Link - For new users to create an account
    4. Social Login - Options for OAuth providers (if enabled)
    
    Key Features:
    - Responsive design for all device sizes
    - Client-side form validation
    - Remember me functionality
    - Password visibility toggle
    - Error message display
    
    Security Features:
    - CSRF protection
    - Password hashing (bcrypt)
    - Rate limiting (5 attempts per 15 minutes)
    - Secure session management
    - XSS protection
    - Clickjacking protection
    - Secure cookie settings
    
    Form Validation:
    - Required field validation
    - Email format validation
    - Minimum password length (8 characters)
    - Server-side validation feedback
    
    Dependencies:
    - Bootstrap 5.3.0 (CSS/JS)
    - Font Awesome 6.4.0 for icons
    - Custom CSS from static/css/
    - Flask-Login for session management
    - Flask-WTF for form handling
    
    Author: Jacek Robert Kszczot
    Project: MSc Data Science & AI - COM7016
    University: Leeds Trinity University
    Last Updated: July 2024
    ===========================================================================
-->

<div class="auth-container">
    <div class="auth-card">
        <!-- ======================
             Login Heading 
             ====================== -->
        <div class="auth-header">
            <h1>Log In to PolicyCraft</h1>
            <p>Access your AI policy analysis dashboard</p>
        </div>
        
        <!-- Login form -->
        <form method="POST" class="auth-form">
            {{ form.hidden_tag() }}
            
            <div class="form-group">
                {{ form.username_or_email.label(text='Email', class='form-label') }}
                {{ form.username_or_email(class="form-input", placeholder='Enter email address') }}
                {% if form.username_or_email.errors %}
                    <div class="form-errors">
                        {% for error in form.username_or_email.errors %}
                            <span class="error">{{ error }}</span>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
            
            <div class="form-group">
                {{ form.password.label(class="form-label") }}
                {{ form.password(class="form-input") }}
                {% if form.password.errors %}
                    <div class="form-errors">
                        {% for error in form.password.errors %}
                            <span class="error">{{ error }}</span>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
            
            <div class="form-group checkbox-group">
                {{ form.remember_me(class="form-checkbox") }}
                {{ form.remember_me.label(class="checkbox-label") }}
            </div>
            
            <div class="form-group">
                {{ form.submit(class="btn btn-primary btn-full") }}
            </div>
            
            <div class="help-text" style="margin-top: 1.5rem; text-align: center; color: #6b7280; font-size: 0.9rem;">
                If you're experiencing issues logging in, please contact the administrator.
            </div>
        </form>
        
        <!-- Registration link -->
        <div class="auth-footer">
            <p>Don't have an account? 
                <a href="{{ url_for('auth.register') }}" class="auth-link">Register here</a>
            </p>
        </div>
    </div>
    
   
{% endblock %}
