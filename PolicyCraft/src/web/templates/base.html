<!DOCTYPE html>
<!--
    PolicyCraft - Base Template
    
    This is the base template that serves as the foundation for all pages in the
    PolicyCraft application. It defines the common structure, meta tags, and
    includes that are shared across all pages, ensuring consistency and
    maintainability throughout the application.
    
    Table of Contents:
    1. HTML5 Doctype & Language
    2. Head Section
    3. Body Structure
    4. Navigation Bar
    5. Flash Messages
    6. Main Content Block
    7. Footer Section
    8. JavaScript Includes
    
    Key Features:
    - Responsive design framework
    - Consistent navigation and layout
    - Flash messaging system
    - Dynamic content blocks
    
    Author: Jacek Robert Kszczot
    Project: MSc Data Science & AI - COM7016
    University: Leeds Trinity University
    - Responsive design with proper viewport settings
    - SEO-optimised meta tags
    - Consistent navigation and footer across all pages
    - Flash message system for user feedback
    - Block-based template inheritance system
    - Optimised resource loading (CSS/JS)
    
    Template Blocks (for child templates to override):
    - title: Page title (appended to site name)
    - extra_head: Additional head content (CSS, meta tags, etc.)
    - content: Main page content
    - extra_scripts: Additional JavaScript includes
    
    Dependencies:
    - Bootstrap 5.3.0 (CSS/JS)
    - Font Awesome 6.4.0 (Icons)
    - Custom CSS/JS files
    
    Theme: Academic Elegance
    Colour Scheme: Professional Blue & Gold
    
    Image Credits:
    - Hero Background: Adobe Stock #1182616543 (Student License)
    - Icons: Font Awesome (MIT License)
    
    Author: Jacek Robert Kszczot
    Project: MSc Data Science & AI - COM7016
    University: Leeds Trinity University
-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="PolicyCraft - AI Policy Analysis for Higher Education">
    <meta name="author" content="Jacek Robert Kszczot">
    <title>{% block title %}PolicyCraft - AI Policy Analysis{% endblock %}</title>
    
    <!-- Main Stylesheet -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    
    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar" style="position:relative;">
        <div class="nav-brand">
            <a href="{{ url_for('index') }}">PolicyCraft</a>
        </div>
        
        <div class="nav-links">
                <a href="{{ url_for('index') }}">Home</a>
            {% if session.get('is_admin') %}
                <a href="{{ url_for('dashboard') }}">Dashboard</a>
                <a href="{{ url_for('upload_file') }}">Upload</a>
                <a href="{{ url_for('admin.dashboard') }}">Admin</a>
                <a href="{{ url_for('about') }}">About</a>
                <a href="{{ url_for('admin.logout') }}" onclick="return confirm('Log out of admin?')" class="logout-link">Logout</a>
            {% elif current_user and current_user.is_authenticated and current_user.role == 'admin' %}
                <a href="{{ url_for('admin.dashboard') }}">Admin</a>
                <a href="{{ url_for('dashboard') }}">Dashboard</a>
                <a href="{{ url_for('upload_file') }}">Upload</a>
                <a href="{{ url_for('about') }}">About</a>
                <a href="{{ url_for('auth.profile') }}">Profile</a>
                <a href="{{ url_for('auth.logout') }}" onclick="return confirm('Log out?')" class="logout-link">Logout</a>
            {% elif current_user and current_user.is_authenticated %}
                <a href="{{ url_for('dashboard') }}">Dashboard</a>
                <a href="{{ url_for('upload_file') }}">Upload</a>
                <a href="{{ url_for('about') }}">About</a>
                <a href="{{ url_for('auth.profile') }}">Profile</a>
                <a href="{{ url_for('auth.logout') }}" onclick="return confirm('Log out?')" class="logout-link">Logout</a>
            {% else %}
                <a href="{{ url_for('about') }}">About</a>
                <a href="{{ url_for('auth.login') }}" class="btn btn-outline">Login</a>
                <a href="{{ url_for('auth.register') }}" class="btn btn-primary">Register</a>
            {% endif %}
        </div>
    </nav>
    
    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="flash-messages">
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }}">
                        <span>{{ message }}</span>
                        <button class="alert-close" onclick="this.parentElement.remove()">&times;</button>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}
    
    <!-- Main Content -->
    <main class="main-content">
        {% block content %}{% endblock %}
    </main>
    
    <!-- Footer -->
    <footer class="footer">
        <p>&copy; 2025 PolicyCraft - AI Policy Analysis Framework</p>
        <p>Created by <strong>Jacek Robert Kszczot</strong> | MSc Data Science & AI | Leeds Trinity University</p>
        <p><small>All Rights Reserved | Protected under UK Copyright Law | Academic submission COM7016</small></p>
    </footer>
    
    <!-- Auto-hide flash messages -->
    <script>
        setTimeout(() => {
            document.querySelectorAll('.alert').forEach(alert => alert.remove());
        }, 5000);
    </script>
    
    <!-- Additional scripts from child templates -->
    {% block extra_scripts %}{% endblock %}
</body>
</html>
